<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Motion System — Log• Design System</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>

  <header class="site-header">
    <a href="index.html" class="mark">Log<span class="period">•</span></a>
    <div class="site-header-controls">
      <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false"><span class="nav-toggle-icon"></span></button>
      <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode"><span id="themeIcon">&#9728;</span></button>
    </div>
    <nav class="site-nav" aria-label="Main navigation">
      <a href="index.html">Home</a>
      <a href="brand-system.html">Brand</a>
      <a href="component-state-matrix.html">Components</a>
      <a href="motion-system.html">Motion</a>
      <a href="layout-system.html">Layout</a>
      <a href="engineer-quick-start.html">Quick Start</a>
    </nav>
  </header>

  <div class="container">
    <div class="breadcrumb">
      <a href="index.html">Home</a><span class="separator">/</span>Motion System
    </div>

    <nav class="page-toc">
      <h3>Contents</h3>
      <ol>
        <li><a href="#philosophy">Philosophy</a></li>
        <li><a href="#duration-scale">Duration Scale</a></li>
        <li><a href="#mechanical-easing">Mechanical Easing Curve</a></li>
        <li><a href="#animations">All 6 Animations</a></li>
        <li><a href="#commit-cycle">Commit Cycle (3-Stage)</a></li>
        <li><a href="#idle-trace-motion">Idle Trace (No Animation)</a></li>
        <li><a href="#reduced-motion">Reduced Motion</a></li>
        <li><a href="#prohibited">Prohibited Animations</a></li>
        <li><a href="#swiftui-motion">SwiftUI Mapping</a></li>
      </ol>
    </nav>

    <!-- Philosophy -->
    <section class="section" id="philosophy">
      <h2>Motion Philosophy</h2>
      <p><strong>"Stillness over performance."</strong> Animation in Log serves mechanical feedback only. Every motion represents a physical mechanism: a shutter pressing, tape advancing, a drum turning. No decorative motion. No celebration. The instrument records; it does not perform.</p>

      <div class="info-box">
        <p><strong>Total animations in Log: 6.</strong> Zero celebration animations. If you're adding a 7th, justify it against the mechanical metaphor.</p>
      </div>
    </section>

    <!-- Duration Scale -->
    <section class="section" id="duration-scale">
      <h2>Duration Scale</h2>

      <div class="table-scroll">
        <table class="spec-table">
          <thead>
            <tr><th>Animation</th><th>Duration</th><th>Priority</th><th>Can Interrupt?</th></tr>
          </thead>
          <tbody>
            <tr><td>Idle trace</td><td>0ms (instant)</td><td>Highest</td><td>N/A</td></tr>
            <tr><td>Button hover</td><td>150ms</td><td>Low</td><td>Yes</td></tr>
            <tr><td>Shutter press</td><td>150ms</td><td>High</td><td>No</td></tr>
            <tr><td>Page load</td><td>300ms</td><td>High</td><td>No</td></tr>
            <tr><td>Dark mode transition</td><td>300ms</td><td>Medium</td><td>Yes</td></tr>
            <tr><td>Entry appear</td><td>350ms</td><td>High</td><td>No</td></tr>
            <tr><td>Modal</td><td>400ms</td><td>Medium</td><td>No</td></tr>
            <tr><td>Timeline settle</td><td>250ms</td><td>Medium</td><td>Yes</td></tr>
            <tr><td>Loading</td><td>Infinite</td><td>Low</td><td>Yes</td></tr>
            <tr><td>Convergence reveal</td><td>200–300ms</td><td>High</td><td>No</td></tr>
            <tr><td>Draft framing crossfade</td><td>150–200ms</td><td>High</td><td>No</td></tr>
          </tbody>
        </table>
      </div>

      <p>User can type again after 750ms from commit (full append cycle complete).</p>
    </section>

    <!-- Mechanical Easing -->
    <section class="section" id="mechanical-easing">
      <h2>Mechanical Easing Curve</h2>
      <p><code>cubic-bezier(0.2, 0.8, 0.3, 1.0)</code> — the standard curve for all mechanical actions.</p>

      <div class="info-box">
        <p><strong>Why this curve:</strong> Quick start (immediate motion after trigger), sharp deceleration (mechanical snap into place). No bounce, no wobble. Mimics physical mechanism.</p>
      </div>

      <!-- Visual diagram of the curve -->
      <div style="margin: var(--s-32) 0; padding: var(--s-24); background: var(--paper-00); border: 1px solid var(--paper-10); border-radius: 4px;">
        <svg viewBox="0 0 200 200" width="200" height="200" style="display: block; margin: 0 auto;">
          <rect x="0" y="0" width="200" height="200" fill="none" stroke="var(--paper-10)" stroke-width="1"/>
          <line x1="0" y1="200" x2="200" y2="0" stroke="var(--paper-20)" stroke-width="1" stroke-dasharray="4"/>
          <path d="M 0,200 C 40,40 60,0 200,0" fill="none" stroke="var(--amber)" stroke-width="2"/>
          <circle cx="0" cy="200" r="4" fill="var(--paper-80)"/>
          <circle cx="200" cy="0" r="4" fill="var(--paper-80)"/>
          <circle cx="40" cy="40" r="3" fill="var(--amber)" opacity="0.6"/>
          <circle cx="60" cy="0" r="3" fill="var(--amber)" opacity="0.6"/>
          <text x="100" y="190" text-anchor="middle" font-family="var(--mono)" font-size="10" fill="var(--paper-40)">time</text>
          <text x="10" y="100" text-anchor="middle" font-family="var(--mono)" font-size="10" fill="var(--paper-40)" transform="rotate(-90, 10, 100)">progress</text>
        </svg>
        <p style="text-align: center; font-family: var(--mono); font-size: var(--type-11); color: var(--paper-40); margin-top: var(--s-8); margin-bottom: 0;">cubic-bezier(0.2, 0.8, 0.3, 1.0)</p>
      </div>

      <!-- Easing Comparison Demo -->
      <div style="margin: var(--s-32) 0; padding: var(--s-24); background: var(--paper-00); border: 1px solid var(--paper-10); border-radius: 4px;">
        <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-40); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: var(--s-16);">Easing Comparison — Simultaneous Playback</div>

        <div style="display: flex; gap: var(--s-32); flex-wrap: wrap;">
          <!-- Mechanical -->
          <div style="flex: 1; min-width: 180px;">
            <div style="font-family: var(--mono); font-size: var(--type-13); font-weight: 600; margin-bottom: var(--s-8);">Mechanical (Log•)</div>
            <div style="position: relative; height: 8px; background: var(--paper-10); border-radius: 4px; overflow: visible;">
              <div id="easingBoxMechanical" style="position: absolute; top: -4px; left: 0; width: 16px; height: 16px; background: var(--amber); border-radius: 3px; transition: none;"></div>
            </div>
            <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-30); margin-top: var(--s-8);">cubic-bezier(0.2, 0.8, 0.3, 1.0)</div>
          </div>

          <!-- Standard -->
          <div style="flex: 1; min-width: 180px;">
            <div style="font-family: var(--mono); font-size: var(--type-13); font-weight: 600; margin-bottom: var(--s-8);">ease-in-out (standard)</div>
            <div style="position: relative; height: 8px; background: var(--paper-10); border-radius: 4px; overflow: visible;">
              <div id="easingBoxStandard" style="position: absolute; top: -4px; left: 0; width: 16px; height: 16px; background: var(--paper-40); border-radius: 3px; transition: none;"></div>
            </div>
            <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-30); margin-top: var(--s-8);">ease-in-out</div>
          </div>
        </div>

        <div style="text-align: center; margin-top: var(--s-16);">
          <button id="easingPlayBtn" onclick="playEasingComparison()" style="font-family: var(--mono); font-size: var(--type-13); color: var(--paper-60); background: none; border: 1px solid var(--paper-20); padding: var(--s-8) var(--s-16); border-radius: 3px; cursor: pointer;">Play</button>
        </div>
      </div>

      <h3>Prohibited Easings</h3>
      <div class="table-scroll">
        <table class="spec-table">
          <thead>
            <tr><th>Easing</th><th>Why Prohibited</th></tr>
          </thead>
          <tbody>
            <tr><td><code>linear</code></td><td>Feels robotic, not mechanical</td></tr>
            <tr><td><code>ease-in-out</code></td><td>Too smooth, feels digital — <strong>exception: convergence reveal and draft framing crossfade use ease-in-out per Materiality Spec v1</strong></td></tr>
            <tr><td>Spring / elastic</td><td>Violates mechanical metaphor</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- All 6 Animations -->
    <section class="section" id="animations">
      <h2>All 6 Animations</h2>

      <details>
        <summary>1. Page Load (300ms)</summary>
        <div class="details-content">
          <p>Fade-in from opacity 0 to 1. ease-in-out.</p>
          <div class="code-block">
            <button class="copy-btn">Copy</button>
            <pre>@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.app-container {
  animation: fadeIn 300ms ease-in-out;
}</pre>
          </div>
        </div>
      </details>

      <details>
        <summary>2. Modal Appearance (400ms)</summary>
        <div class="details-content">
          <p>Slide up from bottom + fade-in overlay (200ms).</p>
          <div class="code-block">
            <button class="copy-btn">Copy</button>
            <pre>@keyframes slideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

.modal {
  animation: slideUp 400ms ease-out;
}

.modal-overlay {
  animation: fadeIn 200ms ease-in-out;
}</pre>
          </div>

          <!-- Modal Slide-Up Demo -->
          <div style="margin-top: var(--s-16); padding: var(--s-16); background: var(--paper-05); border: 1px solid var(--paper-10); border-radius: 4px;">
            <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-40); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: var(--s-12);">Live Demo</div>
            <div id="modalDemoContainer" style="position: relative; height: 200px; background: var(--paper-00); border: 1px solid var(--paper-10); border-radius: 4px; overflow: hidden;">
              <!-- Overlay -->
              <div id="modalDemoOverlay" style="position: absolute; inset: 0; background: rgba(0,0,0,0.3); opacity: 0; transition: none; pointer-events: none;"></div>
              <!-- Panel -->
              <div id="modalDemoPanel" style="position: absolute; bottom: 0; left: 0; right: 0; height: 120px; background: var(--paper-00); border-top: 1px solid var(--paper-10); transform: translateY(100%); transition: none; padding: var(--s-16); pointer-events: none;">
                <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-40); margin-bottom: var(--s-8);">MODAL CONTENT</div>
                <div style="font-family: var(--sans); font-size: var(--type-14); color: var(--paper-60);">Panel slides up 400ms ease-out</div>
              </div>
              <!-- Timing labels -->
              <div style="position: absolute; top: var(--s-8); left: var(--s-8); font-family: var(--mono); font-size: var(--type-11);">
                <span id="modalTimingOverlay" style="color: var(--paper-30);">overlay: 200ms</span>
                <span style="color: var(--paper-20); margin: 0 4px;">+</span>
                <span id="modalTimingPanel" style="color: var(--paper-30);">panel: 400ms</span>
              </div>
            </div>
            <div style="text-align: center; margin-top: var(--s-8);">
              <button id="modalShowBtn" onclick="playModalDemo()" style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-60); background: none; border: 1px solid var(--paper-20); padding: var(--s-4) var(--s-8); border-radius: 3px; cursor: pointer;">Show</button>
            </div>
          </div>
        </div>
      </details>

      <details>
        <summary>3. Button Hover (150ms)</summary>
        <div class="details-content">
          <p>Background color transition on hover.</p>
          <div class="code-block">
            <button class="copy-btn">Copy</button>
            <pre>.button {
  transition: background-color 150ms ease-out;
}</pre>
          </div>
        </div>
      </details>

      <details>
        <summary>4. Loading Indicator (infinite)</summary>
        <div class="details-content">
          <p>Spinning (1.5s linear) or pulsing (1s ease-in-out).</p>
          <div class="code-block">
            <button class="copy-btn">Copy</button>
            <pre>@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.loading-spinner {
  animation: spin 1.5s linear infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

.loading-pulse {
  animation: pulse 1s ease-in-out infinite;
}</pre>
          </div>

          <!-- Loading Indicator Demo -->
          <style>
            @keyframes demoSpin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
            @keyframes demoPulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
          </style>
          <div style="margin-top: var(--s-16); padding: var(--s-16); background: var(--paper-05); border: 1px solid var(--paper-10); border-radius: 4px;">
            <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-40); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: var(--s-12);">Live Demo</div>
            <div style="display: flex; gap: var(--s-48); justify-content: center; align-items: center;">
              <!-- Spinner -->
              <div style="text-align: center;">
                <div style="width: 24px; height: 24px; border: 2px solid var(--paper-10); border-top-color: var(--amber); border-radius: 50%; animation: demoSpin 1.5s linear infinite; margin: 0 auto var(--s-8);"></div>
                <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-40);">Spin · 1.5s linear</div>
              </div>
              <!-- Pulse -->
              <div style="text-align: center;">
                <div style="width: 8px; height: 8px; border-radius: 50%; background: var(--amber); animation: demoPulse 1s ease-in-out infinite; margin: 0 auto var(--s-8);"></div>
                <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-40);">Pulse · 1s ease-in-out</div>
              </div>
            </div>
          </div>
        </div>
      </details>

      <details>
        <summary>5. Dark Mode Transition (300ms)</summary>
        <div class="details-content">
          <p>Smooth color property transition.</p>
          <div class="code-block">
            <button class="copy-btn">Copy</button>
            <pre>* {
  transition: background-color 300ms ease-in-out,
              color 300ms ease-in-out,
              border-color 300ms ease-in-out;
}</pre>
          </div>
        </div>
      </details>

      <details open>
        <summary>6. Entry Append Cycle (750ms)</summary>
        <div class="details-content">
          <p>Three-stage mechanical sequence. See <a href="#commit-cycle">Commit Cycle</a> for full detail.</p>
        </div>
      </details>
    </section>

    <!-- Commit Cycle -->
    <section class="section" id="commit-cycle">
      <h2>Commit Cycle — 3-Stage Diagram</h2>
      <p>Total duration: 750ms. Makes append feel physically inscribed.</p>

      <!-- Stage diagram -->
      <div style="display: flex; gap: var(--s-16); margin: var(--s-32) 0; flex-wrap: wrap;">
        <div style="flex: 1; min-width: 180px; background: var(--paper-00); border: 1px solid var(--paper-10); border-radius: 4px; padding: var(--s-16); text-align: center;">
          <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--amber); margin-bottom: var(--s-8);">STAGE 1</div>
          <div style="font-family: var(--mono); font-size: var(--type-14); font-weight: 600; margin-bottom: var(--s-8);">Shutter</div>
          <div style="font-family: var(--mono); font-size: var(--type-13); color: var(--paper-40);">150ms</div>
          <p style="font-size: var(--type-13); margin-top: var(--s-8); margin-bottom: 0;">scale(0.92) ease-out</p>
        </div>
        <div style="flex: 1; min-width: 180px; background: var(--paper-00); border: 1px solid var(--paper-10); border-radius: 4px; padding: var(--s-16); text-align: center;">
          <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--amber); margin-bottom: var(--s-8);">STAGE 2</div>
          <div style="font-family: var(--mono); font-size: var(--type-14); font-weight: 600; margin-bottom: var(--s-8);">Inscription</div>
          <div style="font-family: var(--mono); font-size: var(--type-13); color: var(--paper-40);">350ms</div>
          <p style="font-size: var(--type-13); margin-top: var(--s-8); margin-bottom: 0;">Entry slide + dot pulse<br>mechanical ease</p>
        </div>
        <div style="flex: 1; min-width: 180px; background: var(--paper-00); border: 1px solid var(--paper-10); border-radius: 4px; padding: var(--s-16); text-align: center;">
          <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--amber); margin-bottom: var(--s-8);">STAGE 3</div>
          <div style="font-family: var(--mono); font-size: var(--type-14); font-weight: 600; margin-bottom: var(--s-8);">Reset</div>
          <div style="font-family: var(--mono); font-size: var(--type-13); color: var(--paper-40);">250ms</div>
          <p style="font-size: var(--type-13); margin-top: var(--s-8); margin-bottom: 0;">Scroll settle<br>compose ready</p>
        </div>
      </div>

      <!-- Live Commit Cycle Demo -->
      <div class="demo-box" style="margin: var(--s-32) 0; padding: var(--s-24); background: var(--paper-00); border: 1px solid var(--paper-10); border-radius: 4px;">
        <div style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-40); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: var(--s-16);">TRY IT — Full 750ms Commit Cycle</div>

        <!-- Demo area -->
        <div id="commitDemoArea" style="max-width: 400px; margin: 0 auto;">
          <!-- Timeline container -->
          <div id="commitDemoTimeline" style="min-height: 60px; margin-bottom: var(--s-16); overflow: hidden;">
          </div>

          <!-- Compose + Commit -->
          <div style="display: flex; align-items: center; gap: var(--s-8); padding: var(--s-12) var(--s-16); background: var(--paper-05); border: 1px solid var(--paper-10); border-radius: 4px;">
            <span id="commitDemoPlaceholder" style="font-family: var(--mono); font-size: var(--type-14); color: var(--paper-30); flex: 1;">Log...</span>
            <button id="commitDemoBtn" onclick="playCommitDemo()" style="width: 44px; height: 44px; border-radius: 50%; border: 1px solid var(--amber); background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: transform 150ms ease-out;" aria-label="Play commit demo">
              <span style="width: 8px; height: 8px; border-radius: 50%; background: var(--amber); display: block;"></span>
            </button>
          </div>

          <!-- Stage labels -->
          <div id="commitDemoStages" style="display: flex; gap: var(--s-8); margin-top: var(--s-12); font-family: var(--mono); font-size: var(--type-11); color: var(--paper-30);">
            <span id="stageLabel1" style="flex: 1; text-align: center; padding: var(--s-4); border-radius: 2px;">1 · Shutter · 150ms</span>
            <span id="stageLabel2" style="flex: 1; text-align: center; padding: var(--s-4); border-radius: 2px;">2 · Inscription · 350ms</span>
            <span id="stageLabel3" style="flex: 1; text-align: center; padding: var(--s-4); border-radius: 2px;">3 · Reset · 250ms</span>
          </div>

          <!-- Speed toggle -->
          <div style="text-align: center; margin-top: var(--s-12);">
            <button id="commitDemoSpeed" onclick="toggleCommitSpeed()" style="font-family: var(--mono); font-size: var(--type-11); color: var(--paper-40); background: none; border: 1px solid var(--paper-20); padding: var(--s-4) var(--s-8); border-radius: 3px; cursor: pointer;">1× speed</button>
          </div>
        </div>
      </div>

      <div class="code-block">
        <button class="copy-btn">Copy</button>
        <pre>/* Stage 2: Entry Appear */
@keyframes entryAppear {
  from {
    opacity: 0;
    transform: translateY(-12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.timeline-entry.appearing {
  animation: entryAppear 350ms cubic-bezier(0.2, 0.8, 0.3, 1.0);
  will-change: transform, opacity;
}

/* Stage 2: Dot Pulse (parallel) */
@keyframes dotPulse {
  from { transform: scale(0.85); }
  to { transform: scale(1.0); }
}

.timeline-entry.appearing .intent-dot {
  animation: dotPulse 350ms cubic-bezier(0.2, 0.8, 0.3, 1.0);
  will-change: transform;
}

/* Cleanup */
.timeline-entry:not(.appearing) {
  will-change: auto;
}</pre>
      </div>

      <div class="code-block">
        <button class="copy-btn">Copy</button>
        <pre>// Full orchestration
function handleCommit(text) {
  // Stage 1: Shutter (CSS :active handles scale)

  setTimeout(() =&gt; {
    // Stage 2: Create entry
    const entry = createEntry(text);
    entry.classList.add('appearing');
    timeline.appendChild(entry);

    setTimeout(() =&gt; {
      entry.classList.remove('appearing');

      // Stage 3: Scroll settle
      timeline.scrollTo({
        top: timeline.scrollHeight - timeline.clientHeight,
        behavior: 'smooth'
      });

      composeArea.value = '';
      composeArea.focus();
    }, 350);

  }, 150);
}</pre>
      </div>
    </section>

    <!-- Idle Trace -->
    <section class="section" id="idle-trace-motion">
      <h2>Idle Trace — No Animation</h2>
      <p>The idle trace appears instantly. No transition, no easing. The trace was already drawn — the drum was turning while you were away.</p>

      <div class="info-box">
        <p><strong>Height formula:</strong> <code>min(80, 16 + 16 * ln(hours + 1))</code> in points. Label shown for gaps of 1 hour or more. Maximum height: 80pt.</p>
      </div>

      <div class="code-block">
        <button class="copy-btn">Copy</button>
        <pre>.idle-trace {
  width: 1px;
  background: var(--paper-40);
  margin: 0 auto;
  /* NO transition property */
  /* NO animation */
  /* Rendered at final height immediately */
}</pre>
      </div>
    </section>

    <!-- Reduced Motion -->
    <section class="section" id="reduced-motion">
      <h2>Reduced Motion</h2>
      <p>All animations become instant for users with motion sensitivity.</p>

      <div class="code-block">
        <button class="copy-btn">Copy</button>
        <pre>@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .timeline-entry.appearing {
    animation: none;
    opacity: 1;
    transform: translateY(0);
  }

  .commit-button:active {
    transform: none;
  }
}</pre>
      </div>
    </section>

    <!-- Prohibited -->
    <section class="section" id="prohibited">
      <h2>Prohibited Animations</h2>
      <div class="table-scroll">
        <table class="spec-table">
          <thead>
            <tr><th>Prohibited</th><th>Reason</th></tr>
          </thead>
          <tbody>
            <tr><td>Confetti / celebration</td><td>Violates stillness principle</td></tr>
            <tr><td>Bounce / spring</td><td>Violates mechanical metaphor</td></tr>
            <tr><td>Color flash</td><td>Decorative, no structural purpose</td></tr>
            <tr><td>Content-dependent timing</td><td>Entry length must not affect duration</td></tr>
            <tr><td>Idle trace animation</td><td>Trace was already drawn</td></tr>
            <tr><td>Any animation &gt; 1s</td><td>Feels slow for user-triggered actions</td></tr>
            <tr><td>Live draft morphing while typing</td><td>Draft framing regenerates post-commit only — not during input (Materiality Spec v1)</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- SwiftUI -->
    <section class="section" id="swiftui-motion">
      <h2>SwiftUI Animation Mapping</h2>

      <div class="code-block">
        <button class="copy-btn">Copy</button>
        <pre>// Mechanical easing in SwiftUI
extension Animation {
  static let mechanical = Animation.timingCurve(0.2, 0.8, 0.3, 1.0, duration: 0.35)
  static let shutter = Animation.timingCurve(0.2, 0.8, 0.3, 1.0, duration: 0.15)
}

// Respect reduced motion
struct LogMotion {
  @Environment(\.accessibilityReduceMotion) var reduceMotion

  var entryAppear: Animation? {
    reduceMotion ? nil : .mechanical
  }

  var shutterPress: Animation? {
    reduceMotion ? nil : .shutter
  }
}</pre>
      </div>

      <div class="table-scroll">
        <table class="spec-table">
          <thead>
            <tr><th>CSS</th><th>SwiftUI</th></tr>
          </thead>
          <tbody>
            <tr><td><code>cubic-bezier(0.2, 0.8, 0.3, 1.0)</code></td><td><code>.timingCurve(0.2, 0.8, 0.3, 1.0)</code></td></tr>
            <tr><td><code>transition: 150ms</code></td><td><code>.animation(.shutter)</code></td></tr>
            <tr><td><code>animation: 350ms</code></td><td><code>.animation(.mechanical)</code></td></tr>
            <tr><td><code>prefers-reduced-motion</code></td><td><code>@Environment(\.accessibilityReduceMotion)</code></td></tr>
            <tr><td><code>will-change: transform</code></td><td><code>.drawingGroup()</code> (if needed)</td></tr>
          </tbody>
        </table>
      </div>
    </section>

  </div>

  <footer class="site-footer">
    Log• Design System &mdash; Motion System
  </footer>

  <button class="back-to-top" id="backToTop" aria-label="Back to top">&uarr;</button>

  <script src="assets/scripts.js"></script>
  <script>
    /* ---- Commit Cycle Demo ---- */
    var commitDemoRunning = false;
    var commitSpeedMultiplier = 1;
    var commitEntryCount = 0;

    function toggleCommitSpeed() {
      commitSpeedMultiplier = commitSpeedMultiplier === 1 ? 4 : 1;
      document.getElementById('commitDemoSpeed').textContent = commitSpeedMultiplier === 1 ? '1× speed' : '0.25× speed';
    }

    function highlightStage(n) {
      for (var i = 1; i <= 3; i++) {
        var el = document.getElementById('stageLabel' + i);
        el.style.background = i === n ? 'var(--amber)' : '';
        el.style.color = i === n ? 'var(--paper-00)' : '';
      }
    }

    function clearStageHighlights() {
      for (var i = 1; i <= 3; i++) {
        var el = document.getElementById('stageLabel' + i);
        el.style.background = '';
        el.style.color = '';
      }
    }

    function playCommitDemo() {
      if (commitDemoRunning) return;
      commitDemoRunning = true;

      var btn = document.getElementById('commitDemoBtn');
      var timeline = document.getElementById('commitDemoTimeline');
      var placeholder = document.getElementById('commitDemoPlaceholder');
      var m = commitSpeedMultiplier;

      // Reset
      timeline.innerHTML = '';
      placeholder.textContent = 'Reviewed the motion spec...';
      placeholder.style.fontFamily = 'var(--sans)';
      placeholder.style.color = 'var(--paper-80)';

      // Stage 1: Shutter press
      highlightStage(1);
      btn.style.transform = 'scale(0.92)';

      setTimeout(function() {
        btn.style.transform = 'scale(1)';

        // Stage 2: Entry inscription
        highlightStage(2);
        var entry = document.createElement('div');
        entry.style.cssText = 'display:flex;gap:8px;align-items:flex-start;padding:8px 12px;border-bottom:1px solid var(--paper-10);opacity:0;transform:translateY(-12px);';
        entry.innerHTML = '<span style="width:6px;height:6px;border-radius:50%;background:var(--signal-question);margin-top:7px;flex-shrink:0;"></span>' +
          '<div><span style="font-family:var(--mono);font-size:var(--type-11);color:var(--paper-40);">just now</span>' +
          '<div style="font-family:var(--sans);font-size:var(--type-14);color:var(--paper-80);margin-top:2px;">Reviewed the motion spec...</div></div>';
        timeline.appendChild(entry);

        // Force reflow then animate
        entry.offsetHeight;
        entry.style.transition = 'opacity ' + (350 * m) + 'ms cubic-bezier(0.2,0.8,0.3,1.0), transform ' + (350 * m) + 'ms cubic-bezier(0.2,0.8,0.3,1.0)';
        entry.style.opacity = '1';
        entry.style.transform = 'translateY(0)';

        setTimeout(function() {
          // Stage 3: Reset
          highlightStage(3);
          placeholder.textContent = 'Log...';
          placeholder.style.fontFamily = 'var(--mono)';
          placeholder.style.color = 'var(--paper-30)';

          setTimeout(function() {
            clearStageHighlights();
            commitDemoRunning = false;
          }, 250 * m);
        }, 350 * m);
      }, 150 * m);
    }

    /* ---- Modal Slide-Up Demo ---- */
    var modalDemoRunning = false;

    function playModalDemo() {
      if (modalDemoRunning) return;
      modalDemoRunning = true;

      var overlay = document.getElementById('modalDemoOverlay');
      var panel = document.getElementById('modalDemoPanel');
      var btn = document.getElementById('modalShowBtn');

      // Reset
      overlay.style.transition = 'none';
      panel.style.transition = 'none';
      overlay.style.opacity = '0';
      panel.style.transform = 'translateY(100%)';
      overlay.offsetHeight;

      // Show: overlay 200ms + panel 400ms concurrent
      overlay.style.transition = 'opacity 200ms ease-in-out';
      panel.style.transition = 'transform 400ms ease-out';
      overlay.style.opacity = '1';
      panel.style.transform = 'translateY(0)';
      btn.textContent = 'Dismiss';

      btn.onclick = function() {
        // Dismiss
        overlay.style.transition = 'opacity 200ms ease-in-out';
        panel.style.transition = 'transform 300ms ease-in';
        overlay.style.opacity = '0';
        panel.style.transform = 'translateY(100%)';

        setTimeout(function() {
          btn.textContent = 'Show';
          btn.onclick = playModalDemo;
          modalDemoRunning = false;
        }, 400);
      };
    }

    /* ---- Easing Comparison Demo ---- */
    var easingRunning = false;

    function playEasingComparison() {
      if (easingRunning) return;
      easingRunning = true;

      var mech = document.getElementById('easingBoxMechanical');
      var std = document.getElementById('easingBoxStandard');

      // Reset to start
      mech.style.transition = 'none';
      std.style.transition = 'none';
      mech.style.left = '0';
      std.style.left = '0';

      // Force reflow
      mech.offsetHeight;

      // Animate forward
      mech.style.transition = 'left 600ms cubic-bezier(0.2, 0.8, 0.3, 1.0)';
      std.style.transition = 'left 600ms ease-in-out';
      mech.style.left = 'calc(100% - 16px)';
      std.style.left = 'calc(100% - 16px)';

      setTimeout(function() {
        // Animate back
        mech.style.left = '0';
        std.style.left = '0';

        setTimeout(function() {
          easingRunning = false;
        }, 650);
      }, 800);
    }
  </script>
</body>
</html>
